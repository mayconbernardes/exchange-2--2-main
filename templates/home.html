{% extends 'base.html' %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
{% endblock %}

{% block content %}

<!-- Hero Section -->
<section class="hero d-flex align-items-center justify-content-center text-center text-white">
  <canvas id="hero-canvas"></canvas>
  <div class="overlay"></div>



  <div class="container position-relative z-2 py-5">
    <div class="hero-content mx-auto" style="max-width: 800px;">
      <h1 class="display-3 fw-bold mb-4 animate__animated animate__fadeInDown text-gradient">
        {{ t('home_title') }}
      </h1>
      <p class="lead mb-5 fs-4 animate__animated animate__fadeInUp opacity-90">
        {{ t('home_subtitle') }}
      </p>

      <div class="d-flex flex-wrap justify-content-center gap-4 animate__animated animate__zoomIn">
        {% if current_user.is_authenticated %}
        <a href="{{ url_for('audio') }}" class="btn-premium btn-primary-glass px-5 py-3">
          <i class="fas fa-headphones me-2"></i> {{ t('nav_lessons') }}
        </a>
        <a href="{{ url_for('game_start') }}" class="btn-premium btn-outline-glass px-5 py-3">
          <i class="fas fa-gamepad me-2"></i> {{ t('nav_game') }}
        </a>
        {% else %}
        <a href="{{ url_for('register') }}" class="btn-premium btn-primary-glass px-5 py-3">
          <i class="fas fa-user-plus me-2"></i> {{ t('home_join_free') }}
        </a>
        <a href="{{ url_for('login') }}" class="btn-premium btn-outline-glass px-5 py-3">
          <i class="fas fa-sign-in-alt me-2"></i> {{ t('nav_login') }}
        </a>
        {% endif %}
      </div>
    </div>
  </div>
</section>

<!-- Why Join Section -->
<section class="py-5 bg-light-modern">
  <div class="container py-4">
    <div class="text-center mb-5">
      <h2 class="fw-bold display-5 text-dark">{{ t('home_why_title') }}</h2>
      <div class="divider-primary mx-auto"></div>
    </div>
    <div class="row g-4 justify-content-center">
      <div class="col-lg-4 col-md-6">
        <div class="glass-card h-100 p-4 text-center">
          <div class="icon-circle bg-primary-soft mb-4">
            <i class="fas fa-headphones fa-2x text-primary"></i>
          </div>
          <h4 class="fw-bold mb-3">{{ t('home_why_lessons_title') }}</h4>
          <p class="text-muted leading-relaxed">{{ t('home_why_lessons_text') }}</p>
        </div>
      </div>

      <div class="col-lg-4 col-md-6">
        <div class="glass-card h-100 p-4 text-center">
          <div class="icon-circle bg-success-soft mb-4">
            <i class="fas fa-gamepad fa-2x text-success"></i>
          </div>
          <h4 class="fw-bold mb-3">{{ t('home_why_games_title') }}</h4>
          <p class="text-muted leading-relaxed">{{ t('home_why_games_text') }}</p>
        </div>
      </div>

      <div class="col-lg-4 col-md-6">
        <div class="glass-card h-100 p-4 text-center">
          <div class="icon-circle bg-info-soft mb-4">
            <i class="fas fa-globe fa-2x text-info"></i>
          </div>
          <h4 class="fw-bold mb-3">{{ t('home_why_community_title') }}</h4>
          <p class="text-muted leading-relaxed">{{ t('home_why_community_text') }}</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- How It Works -->
<section class="py-5 bg-white text-center">
  <div class="container py-4">
    <div class="text-center mb-5">
      <h2 class="fw-bold display-5 text-dark">{{ t('home_how_title') }}</h2>
      <div class="divider-success mx-auto"></div>
    </div>
    <div class="row g-4">
      <div class="col-md-4">
        <div class="step-card">
          <div class="step-number">01</div>
          <h5 class="fw-bold text-dark mt-3">{{ t('home_how_1_title') }}</h5>
          <p class="text-muted small">{{ t('home_how_1_text') }}</p>
        </div>
      </div>

      <div class="col-md-4">
        <div class="step-card">
          <div class="step-number">02</div>
          <h5 class="fw-bold text-dark mt-3">{{ t('home_how_2_title') }}</h5>
          <p class="text-muted small">{{ t('home_how_2_text') }}</p>
        </div>
      </div>

      <div class="col-md-4">
        <div class="step-card">
          <div class="step-number">03</div>
          <h5 class="fw-bold text-dark mt-3">{{ t('home_how_3_title') }}</h5>
          <p class="text-muted small">{{ t('home_how_3_text') }}</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Testimonials -->
<section class="py-5 testimonial-section text-center">
  <div class="container py-5">
    <div class="text-center mb-5">
      <h2 class="fw-bold text-white display-6">{{ t('home_testimonials_title') }}</h2>
    </div>
    <div class="row g-4">
      <div class="col-md-4">
        <div class="testimonial-card">
          <div class="quote-icon"><i class="fas fa-quote-left"></i></div>
          <p class="mb-4">{{ t('home_test_1_text') }}</p>
          <div class="author-info">
            <div class="author-name">{{ t('home_test_1_author') }}</div>
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="testimonial-card">
          <div class="quote-icon"><i class="fas fa-quote-left"></i></div>
          <p class="mb-4">{{ t('home_test_2_text') }}</p>
          <div class="author-info">
            <div class="author-name">{{ t('home_test_2_author') }}</div>
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="testimonial-card">
          <div class="quote-icon"><i class="fas fa-quote-left"></i></div>
          <p class="mb-4">{{ t('home_test_3_text') }}</p>
          <div class="author-info">
            <div class="author-name">{{ t('home_test_3_author') }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>



<!-- Custom Styles moved to static/css/home.css -->

<!-- Three.js Library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.160.0/three.min.js"></script>

<script>
  // Three.js Particle Background
  (function () {
    const canvas = document.getElementById('hero-canvas');
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true, antialias: true });

    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(window.devicePixelRatio);

    // Create Particles
    const particlesGeometry = new THREE.BufferGeometry();
    const particlesCount = 2000;
    const posArray = new Float32Array(particlesCount * 3);

    for (let i = 0; i < particlesCount * 3; i++) {
      posArray[i] = (Math.random() - 0.5) * 10;
    }

    particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));

    const particlesMaterial = new THREE.PointsMaterial({
      size: 0.008,
      color: '#ffffff',
      transparent: true,
      opacity: 0.9,
      blending: THREE.AdditiveBlending
    });

    const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
    scene.add(particlesMesh);

    camera.position.z = 2;

    // Mouse Interaction
    let mouseX = 0;
    let mouseY = 0;

    document.addEventListener('mousemove', (event) => {
      mouseX = event.clientX / window.innerWidth - 0.5;
      mouseY = event.clientY / window.innerHeight - 0.5;
    });

    // Animation Loop
    function animate() {
      requestAnimationFrame(animate);

      particlesMesh.rotation.y += 0.001;
      particlesMesh.rotation.x += 0.0005;

      // Subtle mouse movement influence
      particlesMesh.rotation.y += mouseX * 0.05;
      particlesMesh.rotation.x += -mouseY * 0.05;

      renderer.render(scene, camera);
    }

    animate();

    // Handle Resize
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  })();
</script>

{% endblock %}